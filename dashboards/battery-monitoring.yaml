# Battery Monitoring Dashboard
# Modern Mushroom Cards implementation for comprehensive battery monitoring

title: Battery Monitoring
path: battery-monitoring
theme: Mushroom
badges: []
cards:
  # Critical Battery Alerts Section
  - type: custom:mushroom-chips-card
    chips:
      - type: template
        icon: mdi:battery-alert
        icon_color: red
        content: >
          {% set low_batteries = states.sensor 
            | selectattr('attributes.device_class', 'eq', 'battery')
            | selectattr('state', 'is_number')
            | selectattr('state', 'lt', 20)
            | list | count %}
          {% if low_batteries > 0 %}
            {{ low_batteries }} Critical
          {% endif %}
      - type: template
        icon: mdi:battery-30
        icon_color: orange
        content: >
          {% set low_batteries = states.sensor 
            | selectattr('attributes.device_class', 'eq', 'battery')
            | selectattr('state', 'is_number')
            | selectattr('state', 'ge', 20)
            | selectattr('state', 'lt', 30)
            | list | count %}
          {% if low_batteries > 0 %}
            {{ low_batteries }} Low
          {% endif %}

  # Security & Safety Devices
  - type: custom:mushroom-title-card
    title: Security & Safety
  - type: grid
    columns: 2
    square: false
    cards:
      # Front Door Lock
      - type: custom:mushroom-entity-card
        entity: sensor.front_door_battery
        name: Front Door Lock
        icon: mdi:door-closed-lock
        icon_color: >-
          {% set level = states('sensor.front_door_battery') | int(0) %}
          {% if level > 30 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.front_door_battery') | int(0) %}
          {{ level }}% Battery
        tap_action:
          action: more-info

      # Master Bedroom Motion
      - type: custom:mushroom-entity-card
        entity: sensor.master_bedroom_battery
        name: Master Bedroom Motion
        icon: mdi:motion-sensor
        icon_color: >-
          {% set level = states('sensor.master_bedroom_battery') | int(0) %}
          {% if level > 30 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.master_bedroom_battery') | int(0) %}
          {{ level }}% Battery

  # Phone Devices
  - type: custom:mushroom-title-card
    title: Mobile Devices
  - type: grid
    columns: 3
    square: false
    cards:
      # Brian's Phone
      - type: custom:mushroom-entity-card
        entity: sensor.brian_phone_battery_level
        name: Brian's Phone
        icon: mdi:cellphone
        icon_color: >-
          {% set level = states('sensor.brian_phone_battery_level') | int(0) %}
          {% if level > 50 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.brian_phone_battery_level') | int(0) %}
          {% set charging = is_state('binary_sensor.brian_phone_is_charging', 'on') %}
          {{ level }}%{% if charging %} ⚡{% endif %}

      # Hester's Phone  
      - type: custom:mushroom-entity-card
        entity: sensor.hester_phone_battery_level
        name: Hester's Phone
        icon: mdi:cellphone
        icon_color: >-
          {% set level = states('sensor.hester_phone_battery_level') | int(0) %}
          {% if level > 50 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.hester_phone_battery_level') | int(0) %}
          {% set charging = is_state('binary_sensor.hester_phone_is_charging', 'on') %}
          {{ level }}%{% if charging %} ⚡{% endif %}

      # Towner's Phone
      - type: custom:mushroom-entity-card
        entity: sensor.towner_phone_battery_level_2
        name: Towner's Phone
        icon: mdi:cellphone
        icon_color: >-
          {% set level = states('sensor.towner_phone_battery_level_2') | int(0) %}
          {% if level > 50 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.towner_phone_battery_level_2') | int(0) %}
          {% set charging = is_state('binary_sensor.towner_phone_is_charging_2', 'on') %}
          {{ level }}%{% if charging %} ⚡{% endif %}

  # Z-Wave Remote Controls
  - type: custom:mushroom-title-card
    title: Remote Controls
  - type: grid
    columns: 2
    square: false
    cards:
      # Brian's Bedroom Remote
      - type: custom:mushroom-entity-card
        entity: sensor.bedroom_remote_brian_battery_level
        name: Brian's Remote
        icon: mdi:remote
        icon_color: >-
          {% set level = states('sensor.bedroom_remote_brian_battery_level') | int(0) %}
          {% if level > 30 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.bedroom_remote_brian_battery_level') | int(0) %}
          {% set charging = is_state('binary_sensor.bedroom_remote_brian_battery_is_charging', 'on') %}
          {{ level }}%{% if charging %} ⚡{% endif %}

      # Hester's Bedroom Remote
      - type: custom:mushroom-entity-card
        entity: sensor.bedroom_remote_hester_battery_level
        name: Hester's Remote
        icon: mdi:remote
        icon_color: >-
          {% set level = states('sensor.bedroom_remote_hester_battery_level') | int(0) %}
          {% if level > 30 %}
            green
          {% elif level > 20 %}
            orange
          {% else %}
            red
          {% endif %}
        secondary_info: >-
          {% set level = states('sensor.bedroom_remote_hester_battery_level') | int(0) %}
          {% set charging = is_state('binary_sensor.bedroom_remote_hester_battery_is_charging', 'on') %}
          {{ level }}%{% if charging %} ⚡{% endif %}

  # Roomba Vacuum
  - type: custom:mushroom-title-card
    title: Cleaning Devices
  - type: custom:mushroom-entity-card
    entity: sensor.sally_battery
    name: Sally (Roomba)
    icon: mdi:robot-vacuum
    icon_color: >-
      {% set level = states('sensor.sally_battery') | int(0) %}
      {% if level > 50 %}
        green
      {% elif level > 20 %}
        orange
      {% else %}
        red
      {% endif %}
    secondary_info: >-
      {% set level = states('sensor.sally_battery') | int(0) %}
      {% set charging = is_state('vacuum.sally', 'docked') %}
      {{ level }}%{% if charging %} 🏠{% endif %}
